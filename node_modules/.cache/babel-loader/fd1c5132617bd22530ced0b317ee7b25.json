{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/constantine/Dev/FrontEnd/progress/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import Localbase from\"localbase\";import QuestionData,{version}from\"/Users/constantine/Dev/FrontEnd/progress/src/450DSAFinal.js\";var db=new Localbase(\"db\");window.db=db;db.config.debug=false;var localVersion=localStorage.getItem(\"450version\");window.localVersion=localVersion;window.version=version;export function insertData(callback){QuestionData.forEach(function(topic,index){db.collection(\"450dsaArchive\").add(topic,topic.topicName.replace(/[^A-Z0-9]+/gi,\"_\").toLowerCase());});getData(callback);}export function getData(callback){db.collection(\"450dsaArchive\").get().then(function(data){if(data.length===0){insertData(callback);}else{data.sort(function(a,b){return a.position-b.position;});if(localVersion===null||localVersion===undefined){localStorage.setItem(\"450version\",100000000);setTimeout(function(){window.location.reload();},3000);}if(parseInt(localVersion)!==version){var i=0;var _iterator=_createForOfIteratorHelper(data),_step;try{var _loop=function _loop(){var topic=_step.value;var dataFromJSON=QuestionData[i].questions;var len=dataFromJSON.length;var key=topic.topicName.replace(/[^A-Z0-9]+/gi,\"_\").toLowerCase();topic.questions.forEach(function(qObj,index){if(index<len){if(qObj.Done){dataFromJSON[index][\"Done\"]=true;}if(qObj.hasOwnProperty(\"Bookmark\")){dataFromJSON[index][\"Bookmark\"]=qObj.Bookmark;}else{dataFromJSON[index][\"Bookmark\"]=false;}if(qObj.hasOwnProperty(\"Notes\")){dataFromJSON[index][\"Notes\"]=qObj.Notes;}else{dataFromJSON[index][\"Notes\"]=\"\";}}});updateDBData(key,{started:topic.started,doneQuestions:topic.doneQuestions,questions:dataFromJSON});i++;};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}localStorage.setItem(\"450version\",version);setTimeout(function(){window.location.reload();},3000);}else{return callback(data);}}});}export function getTopicData(key,callback){db.collection(\"450dsaArchive\").doc(key).get().then(function(document){callback(document);});}export function updateDBData(key,updateData){db.collection(\"450dsaArchive\").doc(key).update(updateData);}export function resetDBData(callback){db.collection(\"450dsaArchive\").delete().then(function(response){callback(response);}).catch(function(error){console.log(\"There was an error, do something else\",error);});}export function exportDBData(callback){db.collection(\"450dsaArchive\").get().then(function(data){callback(data);});}export function importDBData(data,callback){resetDBData(function(response){new Promise(function(resolve,reject){data.forEach(function(topic,index){db.collection(\"450dsaArchive\").add(topic,topic.topicName.replace(/[^A-Z0-9]+/gi,\"_\").toLowerCase());if(index===data.length-1){resolve();}});}).then(function(){getData(function(data){callback(data);});});});}","map":{"version":3,"sources":["/Users/constantine/Dev/FrontEnd/progress/src/services/dbServices.js"],"names":["Localbase","QuestionData","version","db","window","config","debug","localVersion","localStorage","getItem","insertData","callback","forEach","topic","index","collection","add","topicName","replace","toLowerCase","getData","get","then","data","length","sort","a","b","position","undefined","setItem","setTimeout","location","reload","parseInt","i","dataFromJSON","questions","len","key","qObj","Done","hasOwnProperty","Bookmark","Notes","updateDBData","started","doneQuestions","getTopicData","doc","document","updateData","update","resetDBData","delete","response","catch","error","console","log","exportDBData","importDBData","Promise","resolve","reject"],"mappings":"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","sourcesContent":["import Localbase from \"localbase\";\nimport QuestionData, {\n  version,\n} from \"/Users/constantine/Dev/FrontEnd/progress/src/450DSAFinal.js\";\nlet db = new Localbase(\"db\");\nwindow.db = db;\ndb.config.debug = false;\nconst localVersion = localStorage.getItem(\"450version\");\nwindow.localVersion = localVersion;\nwindow.version = version;\n\nexport function insertData(callback) {\n  QuestionData.forEach((topic, index) => {\n    db.collection(\"450dsaArchive\").add(\n      topic,\n      topic.topicName.replace(/[^A-Z0-9]+/gi, \"_\").toLowerCase()\n    );\n  });\n  getData(callback);\n}\n\nexport function getData(callback) {\n  db.collection(\"450dsaArchive\")\n    .get()\n    .then((data) => {\n      if (data.length === 0) {\n        insertData(callback);\n      } else {\n        data.sort((a, b) => {\n          return a.position - b.position;\n        });\n        if (localVersion === null || localVersion === undefined) {\n          localStorage.setItem(\"450version\", 100000000);\n          setTimeout(() => {\n            window.location.reload();\n          }, 3000);\n        }\n\n        if (parseInt(localVersion) !== version) {\n          let i = 0;\n          for (let topic of data) {\n            let dataFromJSON = QuestionData[i].questions;\n            let len = dataFromJSON.length;\n            let key = topic.topicName\n              .replace(/[^A-Z0-9]+/gi, \"_\")\n              .toLowerCase();\n            topic.questions.forEach((qObj, index) => {\n              if (index < len) {\n                if (qObj.Done) {\n                  dataFromJSON[index][\"Done\"] = true;\n                }\n                if (qObj.hasOwnProperty(\"Bookmark\")) {\n                  dataFromJSON[index][\"Bookmark\"] = qObj.Bookmark;\n                } else {\n                  dataFromJSON[index][\"Bookmark\"] = false;\n                }\n                if (qObj.hasOwnProperty(\"Notes\")) {\n                  dataFromJSON[index][\"Notes\"] = qObj.Notes;\n                } else {\n                  dataFromJSON[index][\"Notes\"] = \"\";\n                }\n              }\n            });\n            updateDBData(key, {\n              started: topic.started,\n              doneQuestions: topic.doneQuestions,\n              questions: dataFromJSON,\n            });\n            i++;\n          }\n          localStorage.setItem(\"450version\", version);\n          setTimeout(() => {\n            window.location.reload();\n          }, 3000);\n        } else {\n          return callback(data);\n        }\n      }\n    });\n}\n\nexport function getTopicData(key, callback) {\n  db.collection(\"450dsaArchive\")\n    .doc(key)\n    .get()\n    .then((document) => {\n      callback(document);\n    });\n}\n\nexport function updateDBData(key, updateData) {\n  db.collection(\"450dsaArchive\").doc(key).update(updateData);\n}\n\nexport function resetDBData(callback) {\n  db.collection(\"450dsaArchive\")\n    .delete()\n    .then((response) => {\n      callback(response);\n    })\n    .catch((error) => {\n      console.log(\"There was an error, do something else\", error);\n    });\n}\n\nexport function exportDBData(callback) {\n  db.collection(\"450dsaArchive\")\n    .get()\n    .then((data) => {\n      callback(data);\n    });\n}\n\nexport function importDBData(data, callback) {\n  resetDBData((response) => {\n    new Promise((resolve, reject) => {\n      data.forEach((topic, index) => {\n        db.collection(\"450dsaArchive\").add(\n          topic,\n          topic.topicName.replace(/[^A-Z0-9]+/gi, \"_\").toLowerCase()\n        );\n        if (index === data.length - 1) {\n          resolve();\n        }\n      });\n    }).then(() => {\n      getData((data) => {\n        callback(data);\n      });\n    });\n  });\n}\n"]},"metadata":{},"sourceType":"module"}